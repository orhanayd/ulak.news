!function($,window,document,undefined){var pluginName="SimpleMarquee";function Plugin(element,options){this.element=element,this._name=pluginName,this._defaults=$.fn.SimpleMarquee.defaults,this.settings=$.extend({},this._defaults,options),this.marqueeSpawned=[],this.marqueeHovered=!1,this.documentHasFocus=!1,this.counter=0,this.timeLeft=0,this.currentPos=0,this.distanceLeft=0,this.totalDistance=0,this.contentWidth=0,this.endPoint=0,this.duration=0,this.hovered=!1,this.padding=0,this.init()}function marqueeObj(newElement){this.el=newElement,this.counter=0,this.name="",this.timeTop=0,this.currentPos=0,this.distanceTop=0,this.totalDistance=0,this.contentWidth=0,this.endPoint=0,this.duration=0,this.hovered=!1,this.padding=0}$.extend(Plugin.prototype,{init:function(){this.buildCache(),this.bindEvents();var config=this.settings;0!=$(config.marquee_class).width()?void 0!==$(config.marquee_class)?void 0!==$(config.container_class)?0==config.sibling_class||void 0!==$(config.sibling_class)?this.createMarquee():console.error("FATAL: sibling class container class not valid"):console.error("FATAL: marquee container class not valid"):console.error("FATAL: marquee class not valid"):console.error("FATAL: marquee css or children css not correct. Width is either set to 0 or the element is collapsing. Make sure overflow is set on the marquee, and the children are postitioned relatively")},destroy:function(){this.unbindEvents(),this.$element.removeData()},buildCache:function(){this.$element=$(this.element)},bindEvents:function(){var plugin=this;$(window).on("focus",(function(){for(var key in plugin.documentHasFocus=!0,plugin.marqueeSpawned)plugin.marqueeManager(plugin.marqueeSpawned[key])})),$(window).on("blur",(function(){for(var key in plugin.documentHasFocus=!1,plugin.marqueeSpawned)plugin.marqueeSpawned[key].el.clearQueue().stop(),plugin.marqueeSpawned[key].hovered=!0}))},unbindEvents:function(){$(window).off("blur focus")},getPosition:function(elName){return this.currentPos=parseInt($(elName).css("left")),this.currentPos},createMarquee:function(){var plugin=this,config=plugin.settings,marqueeContent=$(config.marquee_class).html(),containerWidth=$(config.container_class).width(),contentWidth=$(config.marquee_class).width(),widthToIgnore=0;0!=config.sibling_class&&(widthToIgnore=$(config.sibling_class).width());var spawnAmount=Math.ceil(containerWidth/contentWidth);$(config.marquee_class).remove(),spawnAmount<=2?spawnAmount=3:spawnAmount++;for(var totalContentWidth,endPoint=-((contentWidth+config.padding)*spawnAmount-containerWidth),totalDistance=containerWidth-endPoint,i=0;i<spawnAmount;i++){var newElement=!1;newElement=1==config.hover?$('<div class="marquee-'+(i+1)+'">'+marqueeContent+"</div>").mouseenter((function(){if(1==plugin.documentHasFocus&&0==plugin.marqueeHovered)for(var key in plugin.marqueeHovered=!0,plugin.marqueeSpawned)plugin.marqueeSpawned[key].el.clearQueue().stop(),plugin.marqueeSpawned[key].hovered=!0})).mouseleave((function(){if(1==plugin.documentHasFocus&&1==plugin.marqueeHovered){for(var key in plugin.marqueeSpawned)plugin.marqueeManager(plugin.marqueeSpawned[key]);plugin.marqueeHovered=!1}})):$('<div class="marquee-'+(i+1)+'">'+marqueeContent+"</div>"),plugin.marqueeSpawned[i]=new marqueeObj(newElement),$(config.container_class).append(newElement),plugin.marqueeSpawned[i].currentPos=widthToIgnore+contentWidth*i+config.padding*i,plugin.marqueeSpawned[i].name=".marquee-"+(i+1),plugin.marqueeSpawned[i].totalDistance=totalDistance,plugin.marqueeSpawned[i].containerWidth=containerWidth,plugin.marqueeSpawned[i].contentWidth=contentWidth,plugin.marqueeSpawned[i].endPoint=endPoint,plugin.marqueeSpawned[i].duration=config.duration,plugin.marqueeSpawned[i].padding=config.padding,plugin.marqueeSpawned[i].el.css("left",plugin.marqueeSpawned[i].currentPos+config.padding+"px"),1==plugin.documentHasFocus&&plugin.marqueeManager(plugin.marqueeSpawned[i])}document.hasFocus()?plugin.documentHasFocus=!0:plugin.documentHasFocus=!1},marqueeManager:function(marqueed_el){var plugin=this,elName=marqueed_el.name;0==marqueed_el.hovered?marqueed_el.counter>0?(marqueed_el.timeLeft=marqueed_el.duration,marqueed_el.el.css("left",marqueed_el.containerWidth+"px"),marqueed_el.currentPos=marqueed_el.containerWidth,marqueed_el.distanceLeft=marqueed_el.totalDistance-(marqueed_el.containerWidth-this.getPosition(elName))):marqueed_el.timeLeft=(marqueed_el.totalDistance-(marqueed_el.containerWidth-this.getPosition(elName)))/marqueed_el.totalDistance*marqueed_el.duration:(marqueed_el.hovered=!1,marqueed_el.currentPos=parseInt(marqueed_el.el.css("left")),marqueed_el.distanceLeft=marqueed_el.totalDistance-(marqueed_el.containerWidth-this.getPosition(elName)),marqueed_el.timeLeft=(marqueed_el.totalDistance-(marqueed_el.containerWidth-marqueed_el.currentPos))/marqueed_el.totalDistance*marqueed_el.duration),this.marqueeAnim(marqueed_el)},marqueeAnim:function(marqueeObject){var plugin=this;marqueeObject.counter++,marqueeObject.el.clearQueue().animate({left:marqueeObject.endPoint+"px"},marqueeObject.timeLeft,"linear",(function(){plugin.marqueeManager(marqueeObject)}))},callback:function(){var onComplete=this.settings.onComplete;"function"==typeof onComplete&&onComplete.call(this.element)}}),$.fn.SimpleMarquee=function(options){return this.each((function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Plugin(this,options))})),this},$.fn.SimpleMarquee.defaults={property:"value",onComplete:null,duration:2e4,padding:10,marquee_class:".marquee",container_class:".breaking-news",sibling_class:0,hover:!0}}(jQuery,window,document);